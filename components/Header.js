import React from 'react'
import LogOut from './Connexion/Logout';
import DeleteAccount from './Connexion/Delete';
import styles from '../styles/UiKit.module.css';
import Button from '@mui/material/Button';
import Menu from '@mui/material/Menu';
import MenuItem from '@mui/material/MenuItem';
import { useRouter } from 'next/router';
import { useSelector } from 'react-redux';



export default function Header(props) {
  const router = useRouter()
  const user = useSelector(((state) => state.user.value))

  const [anchorEl, setAnchorEl] = React.useState(null);
  const open = Boolean(anchorEl);
  const handleClick = (event) => {
    setAnchorEl(event.currentTarget);
  };
  const handleClose = () => {
    setAnchorEl(null);
  };


  let headerContent;
  if (user.token) {
    // Display username if the user is connected
    headerContent = (
      <div>
        <Button
        id="basic-button"
        aria-controls={open ? 'basic-menu' : undefined}
        aria-haspopup="true"
        aria-expanded={open ? 'true' : undefined}
        onClick={handleClick}
      >
        {user.userName}
      </Button>
      <Menu
        id="basic-menu"
        anchorEl={anchorEl}
        open={open}
        onClose={handleClose}
        MenuListProps={{
          'aria-labelledby': 'basic-button',
        }}
      >
        <MenuItem><LogOut/></MenuItem>
        <MenuItem><DeleteAccount/></MenuItem>
      </Menu>
    </div>
    )
  } else {
    // Display sign in and sign up buttons if the user is not connected
    headerContent = (
      <div>
        <Button onClick={() => router.push('/signIn')}>Sign in</Button>
        <Button onClick={() => router.push('/signUp')}>Sign up</Button>
      </div>
    );
  }

  return (
    <div className={styles.header}>
      {/* import svg logo */}
      <svg width="95" height="26" viewBox="0 0 95 26" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M43.3096 17.1911V19.075H32.9084V2.2207H35.14V17.1911H43.3096Z" fill="white"/>
<path d="M52.3744 17.305V16.8371H52.3491C52.16 17.4693 51.7314 18.0636 51.101 18.582C50.4706 19.1004 49.5503 19.3659 48.3526 19.3659C46.991 19.3659 45.932 19.0119 45.2008 18.2785C44.4695 17.5452 44.0913 16.7233 44.0913 15.7498C44.0913 15.1808 44.2048 14.6877 44.4443 14.2325C44.6839 13.7773 44.9612 13.4486 45.2638 13.1957C45.5664 12.9555 45.9698 12.7532 46.5119 12.5635C47.0288 12.3991 47.4827 12.2853 47.8357 12.2095C48.1887 12.1336 48.63 12.0704 49.1973 11.9945C49.7394 11.9187 50.0924 11.8807 50.2563 11.8555C51.0506 11.7164 51.6179 11.5014 51.9331 11.2359C52.2357 10.9704 52.3744 10.6037 52.3744 10.098C52.3744 9.57956 52.1348 9.14966 51.6683 8.82092C51.1767 8.51747 50.5211 8.3531 49.6638 8.3531C48.9073 8.3531 48.3022 8.54276 47.8231 8.94736C47.3314 9.35197 47.0667 9.87036 47.0288 10.5531H44.9108C44.9612 9.51634 45.3773 8.59333 46.1841 7.77148C46.9784 6.97492 48.1131 6.57031 49.6007 6.57031C50.4454 6.57031 51.1767 6.68411 51.8196 6.89905C52.45 7.114 52.9291 7.39216 53.2821 7.69562C53.6099 7.99907 53.8746 8.40367 54.0764 8.85885C54.2655 9.32668 54.3789 9.75657 54.4294 10.1106C54.4798 10.4899 54.505 10.9072 54.505 11.3623V16.6096C54.505 17.482 54.5807 18.3038 54.6941 19.0878H52.4374C52.3996 18.6705 52.3744 18.0889 52.3744 17.305ZM51.3532 16.5716C52.0592 15.8889 52.4122 14.8268 52.4122 13.4107V11.7796H52.3618C52.2231 12.2221 51.9205 12.6014 51.4666 12.9175C51.0002 13.221 50.1681 13.4865 48.9956 13.7015C48.0122 13.8658 47.3062 14.1061 46.8523 14.3842C46.4111 14.6624 46.1715 15.1176 46.1715 15.7498C46.1715 16.3187 46.4111 16.7613 46.8775 17.1153C47.344 17.4693 47.9618 17.6337 48.7182 17.6337C49.752 17.6337 50.6345 17.2797 51.3532 16.5716Z" fill="white"/>
<path d="M65.839 8.34034C66.8476 9.49093 67.3519 11.0335 67.3519 12.9427C67.3519 14.8519 66.8602 16.3945 65.839 17.5704C64.8304 18.7715 63.4814 19.3658 61.792 19.3658C60.7834 19.3658 59.8883 19.0876 59.1319 18.5439C58.3502 18.0003 57.8585 17.3681 57.6064 16.66H57.5812V19.0876H55.4631V2.2207H57.5812V9.35185H57.6064C57.8711 8.61851 58.3628 7.98631 59.1319 7.41734C59.8883 6.87365 60.7834 6.59548 61.792 6.59548C63.4814 6.58284 64.8304 7.1771 65.839 8.34034ZM64.2379 16.2681C64.8934 15.4209 65.2212 14.3083 65.2212 12.9427C65.2212 11.6025 64.8934 10.4898 64.2126 9.64266C63.5318 8.82081 62.5863 8.39092 61.3634 8.39092C60.1153 8.39092 59.1445 8.82081 58.4889 9.69323C57.8333 10.5657 57.5055 11.653 57.5055 12.9554C57.5055 14.2577 57.8333 15.345 58.4889 16.2175C59.1445 17.1152 60.1153 17.5577 61.3634 17.5577C62.6115 17.5451 63.5571 17.1152 64.2379 16.2681Z" fill="white"/>
<path d="M80.7662 17.6083C79.7071 18.8601 78.1564 19.4796 76.1518 19.4796C74.059 19.4796 72.4579 18.8853 71.3484 17.6842C70.239 16.483 69.6716 14.9404 69.6716 13.0818V2.2207H71.9031V13.0818C71.9031 14.3841 72.2562 15.4715 72.9874 16.3186C73.6934 17.1658 74.7524 17.5957 76.1392 17.5957C77.463 17.5957 78.4464 17.1658 79.102 16.3186C79.7576 15.4968 80.0854 14.4094 80.0854 13.0818V2.2207H82.3169V13.0818C82.3421 14.8772 81.8252 16.3819 80.7662 17.6083Z" fill="white"/>
<path d="M93.4744 8.35217C94.483 9.55334 94.9999 11.0706 94.9999 12.9293C94.9999 14.8006 94.483 16.3305 93.4744 17.5316C92.4406 18.7328 91.079 19.3524 89.3517 19.3524C88.2423 19.3524 87.322 19.0868 86.6412 18.5684C85.9351 18.05 85.4687 17.4178 85.2543 16.6339H85.2291V23.7904H83.1111V6.8602H85.2291V9.3384H85.2543C85.4687 8.55448 85.9351 7.92228 86.6412 7.3786C87.322 6.83491 88.2423 6.58203 89.3517 6.58203C91.079 6.58203 92.4406 7.16365 93.4744 8.35217ZM91.8984 16.204C92.554 15.3316 92.8818 14.2189 92.8818 12.9166C92.8818 11.6396 92.554 10.5522 91.8732 9.67978C91.1924 8.80735 90.2469 8.35217 89.0239 8.35217C87.7758 8.35217 86.8303 8.79471 86.1747 9.67978C85.4939 10.5522 85.1661 11.6396 85.1661 12.9166C85.1661 14.2822 85.4687 15.3948 86.0612 16.242C86.6538 17.1144 87.6371 17.5443 89.0239 17.5443C90.2847 17.5569 91.2429 17.1017 91.8984 16.204Z" fill="white"/>
<path d="M11.1489 19.8727V13.4369L9.24516 11.5277V16.737L3.59705 11.2622C2.57585 10.276 2.03373 9.12537 1.9833 7.84834C1.92027 6.58395 2.46238 5.37014 3.59705 4.28277C4.71911 3.18275 5.96724 2.66435 7.2658 2.71493C8.57697 2.7655 9.74946 3.29654 10.7707 4.28277L11.1489 4.64944V2.14595C9.91336 1.2103 8.55176 0.767768 7.10191 0.818344C5.28644 0.894207 3.66009 1.61491 2.23545 2.99309C0.810815 4.38392 0.079586 5.92647 0.00394164 7.69661C-0.0590954 9.41618 0.634312 10.984 2.05895 12.3748L7.90878 18.0519H2.52542L4.34089 19.8727H11.1489Z" fill="white"/>
<path d="M23.1 23.0202C24.5373 21.6294 25.2685 20.0868 25.3316 18.3167C25.3946 16.5971 24.7012 15.0293 23.2766 13.6384L17.4267 7.96134H22.8101L20.9946 6.14062H14.1992V12.5764L16.1029 14.4856V9.26366L21.7511 14.7385C22.7723 15.7247 23.3144 16.8753 23.3648 18.1523C23.4278 19.4293 22.8731 20.6305 21.7511 21.7305C20.629 22.8305 19.3935 23.3489 18.0823 23.2984C16.7711 23.2478 15.5986 22.7168 14.5774 21.7305L14.1992 21.3639V23.8547C15.4347 24.7903 16.7963 25.2329 18.2462 25.1823C20.0491 25.1191 21.688 24.3857 23.1 23.0202Z" fill="white"/>
      </svg>
      {headerContent}
    </div>
  )
}